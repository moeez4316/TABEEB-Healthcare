{
  "info": {
    "name": "TABEEB Appointment System API",
    "description": "Complete API collection for testing TABEEB appointment system",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5002",
      "type": "string"
    },
    {
      "key": "doctor_token",
      "value": "your_doctor_firebase_jwt_token",
      "type": "string"
    },
    {
      "key": "patient_token",
      "value": "your_patient_firebase_jwt_token",
      "type": "string"
    },
    {
      "key": "doctor_uid",
      "value": "doctor_firebase_uid",
      "type": "string"
    },
    {
      "key": "appointment_id",
      "value": "appointment_uuid",
      "type": "string"
    },
    {
      "key": "availability_id",
      "value": "availability_uuid",
      "type": "string"
    },
    {
      "key": "time_slot_id",
      "value": "time_slot_uuid",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Doctor Availability",
      "item": [
        {
          "name": "Set Availability",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"date\": \"2024-08-15\",\n  \"startTime\": \"09:00\",\n  \"endTime\": \"17:00\",\n  \"slotDuration\": 30,\n  \"breakStartTime\": \"12:00\",\n  \"breakEndTime\": \"13:00\",\n  \"isAvailable\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/availability/set",
              "host": ["{{base_url}}"],
              "path": ["api", "availability", "set"]
            }
          }
        },
        {
          "name": "Get Doctor Availability",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/availability/doctor?date=2024-08-15",
              "host": ["{{base_url}}"],
              "path": ["api", "availability", "doctor"],
              "query": [
                {
                  "key": "date",
                  "value": "2024-08-15"
                }
              ]
            }
          }
        },
        {
          "name": "Get Available Slots",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{patient_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/availability/slots/{{doctor_uid}}?date=2024-08-15",
              "host": ["{{base_url}}"],
              "path": ["api", "availability", "slots", "{{doctor_uid}}"],
              "query": [
                {
                  "key": "date",
                  "value": "2024-08-15"
                }
              ]
            }
          }
        },
        {
          "name": "Update Availability",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"date\": \"2024-08-15\",\n  \"startTime\": \"10:00\",\n  \"endTime\": \"16:00\",\n  \"slotDuration\": 45,\n  \"isAvailable\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/availability/{{availability_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "availability", "{{availability_id}}"]
            }
          }
        },
        {
          "name": "Delete Availability",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/availability/{{availability_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "availability", "{{availability_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Appointments",
      "item": [
        {
          "name": "Book Appointment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{patient_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"doctorUid\": \"{{doctor_uid}}\",\n  \"timeSlotId\": \"{{time_slot_id}}\",\n  \"appointmentDate\": \"2024-08-15\",\n  \"patientNotes\": \"Having headache and fever since 2 days\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/appointments/book",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "book"]
            }
          }
        },
        {
          "name": "Get Doctor Appointments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/appointments/doctor?status=PENDING&page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "doctor"],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Patient Appointments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{patient_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/appointments/patient?upcoming=true",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "patient"],
              "query": [
                {
                  "key": "upcoming",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Update Appointment Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"CONFIRMED\",\n  \"doctorNotes\": \"Patient consultation confirmed. Please arrive 10 minutes early.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/appointments/{{appointment_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "{{appointment_id}}", "status"]
            }
          }
        },
        {
          "name": "Cancel Appointment",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{patient_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cancelReason\": \"Emergency came up, need to reschedule\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/appointments/{{appointment_id}}/cancel",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "{{appointment_id}}", "cancel"]
            }
          }
        },
        {
          "name": "Get Appointment Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{patient_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/appointments/{{appointment_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "{{appointment_id}}"]
            }
          }
        },
        {
          "name": "Get Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/appointments/stats/overview",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "stats", "overview"]
            }
          }
        }
      ]
    },
    {
      "name": "Error Test Cases",
      "item": [
        {
          "name": "Unauthorized Request",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/appointments/doctor",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "doctor"]
            }
          }
        },
        {
          "name": "Invalid Date Format",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{doctor_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"date\": \"invalid-date\",\n  \"startTime\": \"09:00\",\n  \"endTime\": \"17:00\",\n  \"slotDuration\": 30\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/availability/set",
              "host": ["{{base_url}}"],
              "path": ["api", "availability", "set"]
            }
          }
        },
        {
          "name": "Book Past Appointment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{patient_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"doctorUid\": \"{{doctor_uid}}\",\n  \"timeSlotId\": \"{{time_slot_id}}\",\n  \"appointmentDate\": \"2020-01-01\",\n  \"patientNotes\": \"This should fail\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/appointments/book",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments", "book"]
            }
          }
        }
      ]
    }
  ]
}
